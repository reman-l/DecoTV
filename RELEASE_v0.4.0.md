# DecoTV v0.4.0 - OrionTV å®Œæ•´æ”¯æŒç‰ˆæœ¬ ğŸ‰

## ğŸŒŸ æ›´æ–°äº®ç‚¹

è¿™æ˜¯ä¸€ä¸ªé‡è¦çš„åŠŸèƒ½æ›´æ–°ç‰ˆæœ¬ï¼Œ**å…¨é¢æ”¯æŒ OrionTV 1.3.11 å®¢æˆ·ç«¯**ï¼ç°åœ¨ä½ å¯ä»¥ä½¿ç”¨ OrionTV äº«å— DecoTV çš„å…¨éƒ¨åŠŸèƒ½ï¼ŒåŒ…æ‹¬æ’­æ”¾è®°å½•åŒæ­¥ã€æ”¶è—ç®¡ç†ã€å¤šè®¾å¤‡ååŒç­‰ã€‚

### ğŸ¯ ä¸»è¦æ–°åŠŸèƒ½

- âœ¨ **OrionTV 1.3.11 å®Œæ•´å…¼å®¹**ï¼šå®ç°å®Œæ•´çš„ LunaTV å…¼å®¹ API
- ğŸ” **Cookie è®¤è¯ç³»ç»Ÿ**ï¼šå®‰å…¨çš„ç”¨æˆ·è®¤è¯ï¼Œæ”¯æŒå¤šè®¾å¤‡ç™»å½•
- ğŸŒ **å®Œæ•´ CORS æ”¯æŒ**ï¼šè§£å†³è·¨åŸŸè®¿é—®é—®é¢˜ï¼Œç¡®ä¿å®¢æˆ·ç«¯æ­£å¸¸å·¥ä½œ
- ğŸ“± **å¤šè®¾å¤‡æ•°æ®åŒæ­¥**ï¼šæ’­æ”¾è®°å½•ã€æ”¶è—ã€æœç´¢å†å²è‡ªåŠ¨åŒæ­¥
- ï¿½ **Docker ç‰ˆæœ¬æ ‡ç­¾**ï¼šæ”¯æŒç‰ˆæœ¬å·æ ‡ç­¾ï¼ˆå¦‚ v0.4.0ï¼‰ï¼Œä¾¿äºç‰ˆæœ¬ç®¡ç†å’Œå›æ»š
- ï¿½ğŸ“š **å®Œå–„çš„ä½¿ç”¨æ–‡æ¡£**ï¼šè¯¦ç»†çš„ OrionTV é…ç½®æŒ‡å—

## ğŸ“ å®Œæ•´æ›´æ–°æ—¥å¿—

### âœ¨ Added - æ–°åŠŸèƒ½

1. **OrionTV å®¢æˆ·ç«¯å®Œæ•´æ”¯æŒ**

   - æ–°å¢ `/api/search/resources` API - è·å–è§†é¢‘æºåˆ—è¡¨
   - æ–°å¢ `/api/search/one` API çš„ CORS æ”¯æŒ - å•æºæœç´¢
   - å®ç° LunaTV å…¼å®¹çš„è®¤è¯ç³»ç»Ÿ
   - æ”¯æŒ OrionTV 1.3.11 åŠæ›´é«˜ç‰ˆæœ¬

2. **CORS è·¨åŸŸæ”¯æŒ**

   - ä¸ºæœç´¢ API æ·»åŠ å®Œæ•´çš„ CORS headers
   - å®ç° OPTIONS é¢„æ£€è¯·æ±‚å¤„ç†
   - æ”¯æŒè·¨åŸŸ Cookie è®¤è¯

3. **å®Œå–„æ–‡æ¡£**

   - æ–°å¢ `docs/OrionTVä½¿ç”¨æŒ‡å—.md`
   - åŒ…å«å¿«é€Ÿå¼€å§‹ã€API åˆ—è¡¨ã€å¸¸è§é—®é¢˜è§£ç­”
   - æä¾›è¯¦ç»†çš„é…ç½®æ­¥éª¤å’ŒæŠ€æœ¯è¯´æ˜

4. **Docker ç‰ˆæœ¬æ ‡ç­¾æ”¯æŒ**

   - é•œåƒè‡ªåŠ¨æ·»åŠ ç‰ˆæœ¬å·æ ‡ç­¾ï¼ˆå¦‚ `v0.4.0`ï¼‰
   - æ”¯æŒå›ºå®šç‰ˆæœ¬éƒ¨ç½²å’Œç‰ˆæœ¬å›æ»š
   - ä¾¿äºç‰ˆæœ¬ç®¡ç†å’Œç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

### ğŸ”§ Changed - æ”¹è¿›

1. **API è®¤è¯å¢å¼º**

   - `/api/search/resources` ç°åœ¨éœ€è¦ç™»å½•è®¤è¯
   - `/api/search/one` ä¿æŒè®¤è¯è¦æ±‚
   - æ›´å®‰å…¨çš„ç”¨æˆ·æ•°æ®ä¿æŠ¤

2. **é”™è¯¯å¤„ç†ä¼˜åŒ–**

   - ç»Ÿä¸€çš„é”™è¯¯å“åº”æ ¼å¼
   - æ›´å‹å¥½çš„é”™è¯¯æç¤ºä¿¡æ¯
   - æ”¹è¿›çš„ç½‘ç»œå¼‚å¸¸å¤„ç†

3. **ä»£ç è´¨é‡æå‡**

   - è§„èŒƒåŒ– CORS å“åº”å¤´
   - ç»Ÿä¸€ API å“åº”æ ¼å¼
   - ä¼˜åŒ–ç±»å‹å®šä¹‰

4. **Docker éƒ¨ç½²ä¼˜åŒ–**

   - æ›´æ–°éƒ¨ç½²æ–‡æ¡£ï¼Œæ·»åŠ ç‰ˆæœ¬æ ‡ç­¾ä½¿ç”¨è¯´æ˜
   - æä¾›ç‰ˆæœ¬å›ºå®šå’Œå›æ»šçš„æœ€ä½³å®è·µ
   - ä¼˜åŒ– GitHub Actions æ„å»ºæµç¨‹

### ğŸ› Fixed - ä¿®å¤

1. **OrionTV å…¼å®¹æ€§é—®é¢˜**

   - ä¿®å¤"è¯·æ£€æŸ¥ç½‘ç»œæˆ–è€…æœåŠ¡å™¨åœ°å€æ˜¯å¦å¯ç”¨"é”™è¯¯
   - è§£å†³è·¨åŸŸè¯·æ±‚å¤±è´¥é—®é¢˜
   - ä¿®å¤ CORS é¢„æ£€è¯·æ±‚è¢«æ‹’ç»

2. **è®¤è¯ç›¸å…³é—®é¢˜**

   - ä¿®å¤éƒ¨åˆ† API ç¼ºå°‘è®¤è¯æ£€æŸ¥
   - æ”¹è¿› Cookie éªŒè¯é€»è¾‘
   - ä¿®å¤è·¨åŸŸ Cookie ä¼ é€’

3. **API å“åº”é—®é¢˜**
   - ä¿®å¤ç¼ºå°‘ CORS å¤´å¯¼è‡´çš„è¯·æ±‚å¤±è´¥
   - ç»Ÿä¸€æ‰€æœ‰å“åº”çš„ CORS é…ç½®
   - ä¿®å¤ OPTIONS æ–¹æ³•æœªå®ç°

### ğŸ”§ Technical - æŠ€æœ¯ç»†èŠ‚

1. **LunaTV API å…¼å®¹å±‚**

   - å®ç° OrionTV æ‰€éœ€çš„æ ¸å¿ƒ API
   - ä¿æŒä¸åŸç‰ˆ LunaTV çš„æ¥å£å…¼å®¹
   - æ”¯æŒ Cookie-based è®¤è¯æœºåˆ¶

2. **è·¨åŸŸèµ„æºå…±äº« (CORS)**

   - Access-Control-Allow-Origin
   - Access-Control-Allow-Credentials
   - Access-Control-Allow-Methods
   - Access-Control-Allow-Headers

3. **è®¤è¯ç³»ç»Ÿ**

   - HMAC-SHA256 ç­¾åéªŒè¯
   - Cookie å®‰å…¨å±æ€§é…ç½®
   - æ”¯æŒ SameSite=None è·¨ç«™ä¼ é€’

4. **å¤šå®¢æˆ·ç«¯æ”¯æŒ**

   - OrionTV å®¢æˆ·ç«¯ï¼ˆLunaTV APIï¼‰
   - TVBox å®¢æˆ·ç«¯ï¼ˆé…ç½®æ–‡ä»¶ï¼‰
   - Web æµè§ˆå™¨è®¿é—®

5. **Docker ç‰ˆæœ¬ç®¡ç†**

   - GitHub Actions è‡ªåŠ¨æ„å»ºå¤šæ¶æ„é•œåƒï¼ˆamd64/arm64ï¼‰
   - è‡ªåŠ¨ä¸ºæ¯ä¸ªç‰ˆæœ¬å·ç”Ÿæˆå¯¹åº”æ ‡ç­¾
   - åŒæ—¶ç»´æŠ¤ `latest` å’Œç‰ˆæœ¬å·æ ‡ç­¾

## ğŸ³ Docker ç‰ˆæœ¬æ ‡ç­¾è¯´æ˜

ä» v0.4.0 å¼€å§‹ï¼ŒDecoTV çš„ Docker é•œåƒæ”¯æŒç‰ˆæœ¬å·æ ‡ç­¾ï¼š

### ï¿½ å¯ç”¨æ ‡ç­¾

| æ ‡ç­¾     | è¯´æ˜     | æ›´æ–°é¢‘ç‡       |
| -------- | -------- | -------------- |
| `latest` | æœ€æ–°æ„å»º | æ¯æ¬¡æ¨é€ä»£ç    |
| `v0.4.0` | ç‰¹å®šç‰ˆæœ¬ | ä»…åœ¨ç‰ˆæœ¬å‘å¸ƒæ—¶ |

### ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

```bash
# ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ï¼ˆåŒ…å«æ‰€æœ‰å°æ›´æ–°ï¼‰
docker pull ghcr.io/decohererk/decotv:latest

# ä½¿ç”¨å›ºå®šç‰ˆæœ¬ï¼ˆç”Ÿäº§ç¯å¢ƒæ¨èï¼‰
docker pull ghcr.io/decohererk/decotv:v0.4.0

# å›æ»šåˆ°æ—§ç‰ˆæœ¬
docker pull ghcr.io/decohererk/decotv:v0.3.0
```

### âœ… ç‰ˆæœ¬æ ‡ç­¾ä¼˜åŠ¿

- æ¸…æ¥šçŸ¥é“è¿è¡Œçš„ç‰ˆæœ¬ï¼Œæ–¹ä¾¿å¯¹æ¯” GitHub æœ€æ–°ç‰ˆ
- å¯ä»¥å›ºå®šç‰ˆæœ¬å·ï¼Œé¿å…æ„å¤–æ›´æ–°å½±å“ç”Ÿäº§ç¯å¢ƒ
- æ”¯æŒç‰ˆæœ¬å›æ»šï¼Œé‡åˆ°é—®é¢˜å¯å¿«é€Ÿæ¢å¤
- ä¾¿äºå›¢é˜Ÿåä½œæ—¶ç»Ÿä¸€ç¯å¢ƒç‰ˆæœ¬

## ï¿½ğŸš€ OrionTV å¿«é€Ÿå¼€å§‹

### 1ï¸âƒ£ å‡†å¤‡å·¥ä½œ

ç¡®ä¿ä½ çš„ DecoTV å·²éƒ¨ç½²å¹¶å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®ï¼Œä¾‹å¦‚ï¼š

```text
https://your-deco-tv.com
```

### 2ï¸âƒ£ é…ç½® OrionTV

1. æ‰“å¼€ OrionTV å®¢æˆ·ç«¯
2. è¿›å…¥ **è®¾ç½®** â†’ **æœåŠ¡å™¨é…ç½®**
3. å¡«å†™ä»¥ä¸‹ä¿¡æ¯ï¼š
   - **æœåŠ¡å™¨åœ°å€**: `https://your-deco-tv.com` ï¼ˆä½ çš„ DecoTV åŸŸåï¼‰
   - **ç”¨æˆ·å**: ä½ çš„ DecoTV ç”¨æˆ·å
   - **å¯†ç **: ä½ çš„ DecoTV å¯†ç 
4. ç‚¹å‡» **ç™»å½•**

### 3ï¸âƒ£ å¼€å§‹ä½¿ç”¨

ç™»å½•æˆåŠŸåï¼Œä½ å¯ä»¥ï¼š

- ğŸ” æœç´¢å½±è§†å†…å®¹
- â­ æ”¶è—å–œæ¬¢çš„å½±ç‰‡
- ğŸ“ è‡ªåŠ¨åŒæ­¥æ’­æ”¾è®°å½•
- ğŸ“± åœ¨å¤šè®¾å¤‡é—´æ— ç¼åˆ‡æ¢

## ğŸ“‹ æ”¯æŒçš„ API åˆ—è¡¨

DecoTV v0.4.0 æ”¯æŒä»¥ä¸‹ OrionTV/LunaTV APIï¼š

| API ç«¯ç‚¹                | åŠŸèƒ½           | è®¤è¯ |
| ----------------------- | -------------- | ---- |
| `/api/login`            | ç”¨æˆ·ç™»å½•       | âŒ   |
| `/api/search/resources` | è·å–è§†é¢‘æºåˆ—è¡¨ | âœ…   |
| `/api/search/one`       | å•æºæœç´¢       | âœ…   |
| `/api/detail`           | è·å–è§†é¢‘è¯¦æƒ…   | âœ…   |
| `/api/favorites`        | æ”¶è—ç®¡ç†       | âœ…   |
| `/api/playrecords`      | æ’­æ”¾è®°å½•       | âœ…   |
| `/api/searchhistory`    | æœç´¢å†å²       | âœ…   |
| `/api/image-proxy`      | å›¾ç‰‡ä»£ç†       | âŒ   |

## ğŸ“– è¯¦ç»†æ–‡æ¡£

æŸ¥çœ‹å®Œæ•´çš„ OrionTV ä½¿ç”¨æŒ‡å—ï¼š

- [docs/OrionTV ä½¿ç”¨æŒ‡å—.md](./docs/OrionTVä½¿ç”¨æŒ‡å—.md)

## ğŸ”„ å‡çº§æŒ‡å—

### ä» v0.3.x å‡çº§

1. **æ‹‰å–æœ€æ–°ä»£ç **ï¼š

   ```bash
   git pull origin main
   ```

2. **å®‰è£…ä¾èµ–**ï¼ˆå¦‚æœ‰æ–°å¢ï¼‰ï¼š

   ```bash
   pnpm install
   ```

3. **é‡æ–°æ„å»º**ï¼š

   ```bash
   pnpm build
   ```

4. **é‡å¯æœåŠ¡**

### é…ç½®è¿ç§»

- âœ… æ— éœ€ä¿®æ”¹ç°æœ‰é…ç½®
- âœ… ç°æœ‰ TVBox é…ç½®ç»§ç»­å¯ç”¨
- âœ… æ•°æ®åº“è‡ªåŠ¨å…¼å®¹
- âœ… ç”¨æˆ·æ•°æ®è‡ªåŠ¨ä¿ç•™

## ğŸ› ï¸ æŠ€æœ¯è¦æ±‚

- **Node.js**: >= 18.17.0
- **éƒ¨ç½²å¹³å°**:
  - ClawCloud (æ¨è)
  - Vercel
  - è‡ªæ‰˜ç®¡æœåŠ¡å™¨
- **å­˜å‚¨**: Upstash Redis æˆ–æœ¬åœ°å­˜å‚¨

## ğŸ› å·²çŸ¥é—®é¢˜

- æš‚æ— 

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰æå‡ºå»ºè®®å’Œåé¦ˆçš„ç”¨æˆ·ï¼ç‰¹åˆ«æ„Ÿè°¢ OrionTV ç”¨æˆ·çš„æµ‹è¯•å’Œåé¦ˆã€‚

## ğŸ“ æ”¯æŒä¸åé¦ˆ

é‡åˆ°é—®é¢˜æˆ–æœ‰å»ºè®®ï¼Ÿ

- ğŸ› [æäº¤ Issue](https://github.com/Decohererk/DecoTV/issues)
- ğŸ’¬ [GitHub Discussions](https://github.com/Decohererk/DecoTV/discussions)

---

**å®Œæ•´æ›´æ–°æ—¥å¿—**: [v0.3.0...v0.4.0](https://github.com/Decohererk/DecoTV/compare/v0.3.0...v0.4.0)

**ä¸‹è½½**: [GitHub Releases](https://github.com/Decohererk/DecoTV/releases/tag/v0.4.0)
